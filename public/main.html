<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é—®æ¸  - æ™ºèƒ½å…«å­—å åœå¹³å°</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="enhanced-animations.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body class="page-transition">
    <script>
        // æ–°ä¼šè¯æ£€æµ‹ - åˆ·æ–°æˆ–é‡æ–°æ‰“å¼€ç½‘ç«™æ—¶æ¸…é™¤ç™»å½•çŠ¶æ€
        (function() {
            const isNewSession = !sessionStorage.getItem('wq_session_active');
            const isFromOtherPage = document.referrer && document.referrer.includes(window.location.hostname);
            
            if (isNewSession) {
                sessionStorage.setItem('wq_session_active', 'true');
                if (!isFromOtherPage) {
                    localStorage.removeItem('wq_user');
                    localStorage.removeItem('wq_token');
                }
            }
        })();
    </script>
    <div class="bg-decoration"></div>
    
    <div class="container">
        <!-- å¤´éƒ¨ -->
        <header class="header">
            <h1 class="logo glow-text">é—®æ¸ </h1>
            <p class="subtitle">æ™ºèƒ½å…«å­—å åœ Â· æŒ‡å¼•æ±‚èŒä¹‹è·¯</p>
        </header>

        <!-- å¯¼èˆª -->
        <nav class="nav">
            <a href="main.html" class="nav-btn active" id="homeLink">é¦–é¡µ</a>
            <a href="wendao.html" class="nav-btn" id="wendaoLink">é—®é“</a>
            <a href="liuyao.html" class="nav-btn" id="liuyaoLink">å…­çˆ»</a>
            <a href="heban.html" class="nav-btn" id="hebanLink">åˆç›˜</a>
            <a href="dashboard.html" class="nav-btn" id="dataLink" style="display: none;">ğŸ“Š æ•°æ®</a>
            <a href="admin.html" class="nav-btn" id="adminLink" style="display: none;">âš™ï¸ ç®¡ç†</a>
            <a href="auth.html" class="nav-btn" id="authLink">ğŸ”‘ ç™»å½•</a>
            <a href="#" class="nav-btn" id="logoutLink" style="display: none;">ğŸšª é€€å‡º</a>
        </nav>

        <!-- æ¬¢è¿è¯­ -->
        <div class="card" id="welcomeCard">
            <h2 class="card-title">ğŸ™ é“å‹å®‰å¥½</h2>
            <p style="text-align: center; color: var(--text-secondary); line-height: 2;">
                æ¬¢è¿æ¥åˆ°é—®æ¸ ï¼Œè¿™é‡Œæ˜¯ä¸“ä¸ºåº”å±Šæ±‚èŒç”Ÿæ‰“é€ çš„æ™ºèƒ½å‘½ç†åˆ†æå¹³å°ã€‚<br>
                ç»“åˆä¼ ç»Ÿå…«å­—å‘½ç†ä¸ç°ä»£AIæŠ€æœ¯ï¼Œä¸ºä½ çš„äº‹ä¸šã€å§»ç¼˜ã€æ—¶è¿æä¾›æŒ‡å¼•ã€‚<br>
                è¯·é€‰æ‹©ä¸‹æ–¹åŠŸèƒ½ï¼Œå¼€å¯ä½ çš„å‘½ç†æ¢ç´¢ä¹‹æ—…ã€‚
            </p>
        </div>

        <!-- åŠŸèƒ½é€‰æ‹© -->
        <div class="feature-grid" id="featureGrid">
            <!-- é—®é“ -->
            <div class="feature-card float-hover neon-glow" onclick="location.href='wendao.html'">
                <span class="feature-icon">ğŸ¯</span>
                <h3 class="feature-title">é—®é“</h3>
                <p class="feature-role">AIè§’è‰²ï¼šå¤©ä¹™è´µäºº</p>
                <p class="feature-desc">
                    åŸºäºå…«å­—åˆ†æäº‹ä¸šã€å§»ç¼˜ã€æ—¶è¿<br>
                    ä¸¥è‚ƒä¸“ä¸šçš„å‘½ç†å¤§å¸ˆ<br>
                    ä¸ºä½ çš„æ±‚èŒä¹‹è·¯æŒ‡ç‚¹è¿·æ´¥
                </p>
            </div>

            <!-- å…­çˆ» -->
            <div class="feature-card float-hover neon-glow" onclick="location.href='liuyao.html'">
                <span class="feature-icon">â˜¯</span>
                <h3 class="feature-title">å…­çˆ»</h3>
                <p class="feature-role">AIè§’è‰²ï¼šå¤ªæè´µäºº</p>
                <p class="feature-desc">
                    é“œé’±æ‘‡å¦ï¼Œé¢„æµ‹å…·ä½“äº‹ä»¶å‰å‡¶<br>
                    ä»™é£é“éª¨çš„å åœä¸“å®¶<br>
                    é’ˆå¯¹ç‰¹å®šé—®é¢˜ç»™å‡ºæ˜ç¡®æŒ‡å¼•
                </p>
            </div>

            <!-- åˆç›˜ -->
            <div class="feature-card float-hover neon-glow" onclick="location.href='heban.html'">
                <span class="feature-icon">ğŸ’•</span>
                <h3 class="feature-title">åˆç›˜</h3>
                <p class="feature-role">AIè§’è‰²ï¼šçº¢é¸¾å¤©å–œ</p>
                <p class="feature-desc">
                    åŒäººå…«å­—åŒ¹é…åº¦åˆ†æ<br>
                    æ¸©æŸ”æµªæ¼«çš„å§»ç¼˜ä¹‹ç¥<br>
                    è§£æä½ ä¸TAçš„ç¼˜åˆ†æ·±æµ…
                </p>
            </div>
        </div>

        <!-- ä½¿ç”¨è¯´æ˜ -->
        <div class="card">
            <h2 class="card-title">ğŸ“– ä½¿ç”¨æŒ‡å—</h2>
            <div class="tip-box">
                <p><strong>é—®é“åŠŸèƒ½ï¼š</strong>è¾“å…¥ä½ çš„ç”Ÿè¾°å…«å­—ï¼Œé€‰æ‹©äº‹ä¸šã€å§»ç¼˜æˆ–æ—¶è¿æ–¹å‘ï¼Œè·å¾—ä¸“ä¸šåˆ†æã€‚</p>
            </div>
            <div class="tip-box">
                <p><strong>å…­çˆ»åŠŸèƒ½ï¼š</strong>å¿ƒä¸­é»˜å¿µä½ æƒ³é—®çš„å…·ä½“é—®é¢˜ï¼Œç‚¹å‡»æ‘‡å¦ï¼Œå…­æ¬¡æŠ•æ·åç”Ÿæˆå¦è±¡ã€‚</p>
            </div>
            <div class="tip-box">
                <p><strong>åˆç›˜åŠŸèƒ½ï¼š</strong>è¾“å…¥ä¸¤äººçš„ç”Ÿè¾°ä¿¡æ¯ï¼Œåˆ†æå…«å­—åŒ¹é…åº¦ï¼Œè·å¾—ç›¸å¤„å»ºè®®ã€‚</p>
            </div>
        </div>

        <!-- å…è´£å£°æ˜ -->
        <div class="card" style="border-color: rgba(255, 100, 100, 0.3);">
            <h2 class="card-title" style="color: #ff6464;">âš ï¸ æ¸©é¦¨æç¤º</h2>
            <p style="text-align: center; color: var(--text-secondary); font-size: 0.9rem;">
                æœ¬å¹³å°çš„å…«å­—æµ‹ç®—ä»…ä¾›å¨±ä¹å‚è€ƒï¼Œåˆ‡å‹¿è¿‡åº¦è¿·ä¿¡ã€‚<br>
                äººç”Ÿé“è·¯éœ€è¦è‡ªå·±å»å¼€æ‹“ï¼Œå‘½ç†åˆ†æåªæ˜¯æä¾›ä¸€ç§æ€è€ƒè§’åº¦ã€‚<br>
                ç¥å„ä½é“å‹æ±‚èŒé¡ºåˆ©ï¼Œå‰ç¨‹ä¼¼é”¦ï¼
            </p>
        </div>

        <!-- é¡µè„š -->
        <footer class="footer">
            <p>é—®æ¸  - æ™ºèƒ½å…«å­—å åœå¹³å°</p>
            <p>ç»“åˆä¼ ç»Ÿå‘½ç†ä¸ç°ä»£AIæŠ€æœ¯</p>
        </footer>
    </div>

    <script src="app.js"></script>
    <script src="analytics.js"></script>
    <script src="enhanced-animations.js"></script>
    <script>
        // åˆå§‹åŒ–æ•°æ®åˆ†æ
        if (window.Analytics) {
            // å…ˆè®¾ç½®ç”¨æˆ·é‚®ç®±ï¼ˆåœ¨ init ä¹‹å‰ï¼‰
            const user = JSON.parse(localStorage.getItem('wq_user') || '{}');
            console.log('[Main] User from localStorage:', user);
            if (user.email) {
                console.log('[Main] Setting email before init:', user.email);
                // è®¾ç½®å…¨å±€å˜é‡è®© analytics.js åœ¨ init æ—¶å°±èƒ½è·å–
                window.__wq_user_email = user.email;
            }
            
            // ç„¶ååˆå§‹åŒ–ï¼ˆä¼šä½¿ç”¨ä¸Šé¢è®¾ç½®çš„ emailï¼‰
            Analytics.init();
            
            // å†è°ƒç”¨ identify ç¡®ä¿å·²æ’é˜Ÿäº‹ä»¶æ›´æ–°
            if (user.email) {
                console.log('[Main] Identifying user:', user.email);
                Analytics.identify(user.email);
            } else {
                console.log('[Main] No email found in user data');
            }
        }
    </script>
    <script>
        // æ£€æŸ¥ç™»å½•çŠ¶æ€
        (function() {
            const user = JSON.parse(localStorage.getItem('wq_user') || '{}');
            const authLink = document.getElementById('authLink');
            const logoutLink = document.getElementById('logoutLink');
            const dataLink = document.getElementById('dataLink');
            const adminLink = document.getElementById('adminLink');
            const homeLink = document.getElementById('homeLink');
            const wendaoLink = document.getElementById('wendaoLink');
            const liuyaoLink = document.getElementById('liuyaoLink');
            const hebanLink = document.getElementById('hebanLink');
            
            if (user.id) {
                if (user.role === 'admin') {
                    // ç®¡ç†å‘˜ï¼šæ˜¾ç¤º æ•°æ®ã€ç®¡ç†ã€é€€å‡º
                    if (homeLink) homeLink.style.display = 'none';
                    if (wendaoLink) wendaoLink.style.display = 'none';
                    if (liuyaoLink) liuyaoLink.style.display = 'none';
                    if (hebanLink) hebanLink.style.display = 'none';
                    if (authLink) authLink.style.display = 'none';
                    if (dataLink) dataLink.style.display = 'inline-block';
                    if (adminLink) adminLink.style.display = 'inline-block';
                    if (logoutLink) {
                        logoutLink.style.display = 'inline-block';
                        logoutLink.onclick = function(e) {
                            e.preventDefault();
                            if (confirm('ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ')) {
                                localStorage.removeItem('wq_user');
                                localStorage.removeItem('wq_token');
                                window.location.reload();
                            }
                        };
                    }
                    // éšè—ä¸»ç•Œé¢å†…å®¹
                    const welcomeCard = document.getElementById('welcomeCard');
                    const featureGrid = document.getElementById('featureGrid');
                    if (welcomeCard) welcomeCard.style.display = 'none';
                    if (featureGrid) featureGrid.style.display = 'none';
                } else {
                    // æ™®é€šç”¨æˆ·ï¼šæ˜¾ç¤º é¦–é¡µã€é—®é“ã€å…­çˆ»ã€åˆç›˜ã€é€€å‡º
                    if (authLink) authLink.style.display = 'none';
                    if (logoutLink) {
                        logoutLink.style.display = 'inline-block';
                        logoutLink.onclick = function(e) {
                            e.preventDefault();
                            if (confirm('ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ')) {
                                localStorage.removeItem('wq_user');
                                localStorage.removeItem('wq_token');
                                window.location.reload();
                            }
                        };
                    }
                }
            }
        })();
    </script>
</body>
</html>